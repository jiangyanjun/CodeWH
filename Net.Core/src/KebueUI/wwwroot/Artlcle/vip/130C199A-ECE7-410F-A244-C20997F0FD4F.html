<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="Language" content="zh-CN">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../../images/kebue.ico">
    <link rel="icon" href="../../images/kebue.ico">
    <meta name="description" content=深入CSS，让网页开发少点“坑”>
    <meta name="keywords" content=深入CSS，让网页开发少点“坑”通常我们在学习CSS的时候，感觉很容易掌握，却常常在实际应用中碰到各式各样难以填补的“坑”，为避免大家受到同样的困惑与不解，本文详细讲解了CSS中优先级和Stacking Context等诸多高级特性。让你更加深入的了解CSS。CSS 优先级优先级是浏览器是通过判断哪些属性值与元素最相关以决定并应用到该元素上的。优先级仅由选择器组成的匹配规则决定的。如果给一个P标签>
    <title>深入CSS，让网页开发少点“坑”</title>

    <link href="../../template/scripts/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../../template/styles/custom.css" rel="stylesheet" />
</head>
<body id="pageBody">
    <div id="divBoxed" class="container">
        <div class="transparent-bg" style="position: absolute;top: 0;left: 0;width: 100%;height: 100%;z-index: -1;zoom: 1;"></div>
        <div class="divPanel notop nobottom">
            <div class="row-fluid">
                <div class="span12">
                    <div id="divLogo">
                        <a href="../../../Home/Index" id="divSiteTitle">科布尔 kebue</a><br />
                        <a href="../../../Home/Index" id="divTagLine">开发者用代码改变世界从科布尔开始</a>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    <div id="divMenuRight" class="pull-right">
                        <div class="navbar">
                            <button type="button" class="btn btn-navbar-highlight btn-large btn-primary" data-toggle="collapse" data-target=".nav-collapse">
                                NAVIGATION <span class="icon-chevron-down icon-white"></span>
                            </button>
                            <div class="nav-collapse collapse">
                                <ul class="nav nav-pills ddmenu">
                                    <li class="dropdown glyphicon glyphicon-arrow-left"><a href='javascript:window.history.back()'>后退</a></li>
                                    <li class="dropdown active"><a href="http://www.kebue.com/">Home</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    <div id="contentInnerSeparator"></div>
                </div>
            </div>
        </div>
        <div class="contentArea">
            <div class="divPanel notop page-content">
                <div class="breadcrumbs">
                    <a href="../../../Home/Index">Home</a> &nbsp;/&nbsp; <span><a href='../../../../../Artlcle/ArticleType/A632AFCE-5A51-4B23-8983-921172870D0C.html' title='CSS'>CSS</a></span>
                </div>
                <div class="row-fluid">
                    <div class="span12" id="divMain">
                        <h1>深入CSS，让网页开发少点“坑”</h1>
                        <pre>
                        <code>
                            <h1 class="postTitle" style="margin: 0px; padding: 0px 0px 10px 5px; font-size: 12px; font-weight: normal; float: left; line-height: 1.5em; width: 718px; clear: both; color: rgb(85, 85, 85); font-family: verdana, &#39;ms song&#39;, 宋体, Arial, 微软雅黑, Helvetica, sans-serif; white-space: normal; background-color: rgb(245, 248, 250);"><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/powertoolsteam/p/5007894.html" style="margin: 0px; padding: 0px; color: rgb(153, 0, 0); text-decoration: none; font-family: 微软雅黑, 黑体, Arial; font-size: 18px;">深入CSS，让网页开发少点“坑”</a></h1><p style="margin: 10px auto; padding: 0px;">&nbsp;<a href="http://images2015.cnblogs.com/blog/139239/201512/139239-20151203151952611-1710744504.png" style="margin: 0px; padding: 0px; color: rgb(85, 85, 85);"><img title="image" src="http://images2015.cnblogs.com/blog/139239/201512/139239-20151203151953564-2058014335.png" alt="image" width="626" height="418" border="0" style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none;"/></a></p><p style="margin: 10px auto; padding: 0px;"><span style="margin: 0px; padding: 0px; font-size: 15px;">&nbsp;通常我们在学习CSS的时候，感觉很容易掌握，却常常在实际应用中碰到各式各样难以填补的“坑”，为避免大家受到同样的困惑与不解，本文详细讲解了CSS中优先级和Stacking Context等诸多高级特性。让你更加深入的了解CSS。</span></p><h2 style="margin: 15px auto 2px; padding: 0px; font-size: 21px;">CSS 优先级</h2><p style="margin: 10px auto; padding: 0px;">优先级是浏览器是通过判断哪些属性值与元素最相关以决定并应用到该元素上的。优先级仅由选择器组成的匹配规则决定的。如果给一个P标签增加一个类（Class）,运行后Class 中的部分属性并未发生改变，及CSS选择器存在优先级问题。</p><h3 style="margin: 15px auto 2px; padding: 0px; font-size: 16px;"><span style="margin: 0px; padding: 0px;">选择符优先级</span></h3><p style="margin: 10px auto; padding: 0px;">常见的选择器种类：</p><ul style="margin-left: 30px; padding: 0px; word-break: break-all;" class=" list-paddingleft-2"><li><p>内联样式（Inline Style）,如&lt;span style=&quot;color:black&quot;&gt;...&lt;/span&gt;；</p></li><li><p>ID选择符（ID selectors），如#id；</p></li><li><p>Class选择符（Class），如 .class {...}、[href=‘’]、:hover；</p></li><li><p>标签选择符（Tag）,如 div,:before</p></li></ul><p style="margin: 10px auto; padding: 0px;">每一类选择器的权值不相同，各选择器的优先级是由权值决定的，</p><ul style="margin-left: 30px; padding: 0px; word-break: break-all;" class=" list-paddingleft-2"><li><p>内联样式：1,0,0,0</p></li><li><p>ID 选择符：1,0,0</p></li><li><p>Class 选择符：1,0</p></li><li><p>Tag选择符：1</p></li></ul><p style="margin: 10px auto; padding: 0px;">&nbsp;<a href="http://images2015.cnblogs.com/blog/139239/201511/139239-20151130174406108-1612138031.png" style="margin: 0px; padding: 0px; color: rgb(85, 85, 85);"><img title="image" src="http://images2015.cnblogs.com/blog/139239/201511/139239-20151130174406546-2134052597.png" alt="image" width="631" height="431" border="0" style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none;"/></a></p><h3 style="margin: 15px auto 2px; padding: 0px; font-size: 16px;"><strong style="margin: 0px; padding: 0px;">&nbsp;来源优先级顺序，如图所示</strong></h3><h3 style="margin: 15px auto 2px; padding: 0px; font-size: 16px;"><a href="http://images2015.cnblogs.com/blog/139239/201511/139239-20151130174407155-610774170.png" style="margin: 0px; padding: 0px; color: rgb(85, 85, 85); font-size: 14px; line-height: 1.5;"><img title="image" src="http://images2015.cnblogs.com/blog/139239/201511/139239-20151130174407796-1199019487.png" alt="image" width="668" height="367" border="0" style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none;"/></a><a href="http://images2015.cnblogs.com/blog/139239/201511/139239-20151130174408171-687645335.png" style="margin: 0px; padding: 0px; color: rgb(85, 85, 85); font-size: 14px; line-height: 1.5;"><img title="image" src="http://images2015.cnblogs.com/blog/139239/201511/139239-20151130174408780-1264395637.png" alt="image" width="667" height="416" border="0" style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none;"/></a></h3><p style="margin: 10px auto; padding: 0px;">样式系统从最右边的选择符开始向左进行匹配规则。只要当前选择符的左边还有其他选择符，样式系统就会继续向左移动，直到找到和规则匹配的元素，或者因为不匹配而退出。</p><p style="margin: 10px auto; padding: 0px;"><strong style="margin: 0px; padding: 0px;">CSS&nbsp;</strong><strong style="margin: 0px; padding: 0px;">优先级法则：</strong></p><ol style="padding: 0px 0px 0px 50px;" class=" list-paddingleft-2"><li><p>选择器都有一个权值，权值越大越优先；</p></li><li><p>当权值相等时，后出现的样式表设置要优于先出现的样式表设置；</p></li><li><p>创作者的规则高于浏览者：即网页编写者设置的CSS 样式的优先权高于浏览器所设置的样式；</p></li><li><p>继承的CSS 样式不如后来指定的CSS 样式；</p></li><li><p>在同一组属性设置中标有“!important”规则的优先级最大；</p></li></ol><h2 style="margin: 15px auto 2px; padding: 0px; font-size: 21px;">CSS常用模型</h2><p style="margin: 10px auto; padding: 0px;">&nbsp;盒子模型(Box Model)就是在网页设计中经常用到的CSS技术所使用的一种思维模型。</p><p style="margin: 10px auto; padding: 0px;"><a href="http://images2015.cnblogs.com/blog/139239/201511/139239-20151130174410765-1931156696.png" style="margin: 0px; padding: 0px; color: rgb(85, 85, 85);"><img title="image" src="http://images2015.cnblogs.com/blog/139239/201511/139239-20151130174411421-1288523812.png" alt="image" width="650" height="477" border="0" style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none;"/></a></p><p style="margin: 10px auto; padding: 0px;"><span style="margin: 0px; padding: 0px; font-size: 15px;">盒子模型相关CSS属性元素内容（element content）、宽度及高度（Width/Height)、内边距（padding）、边框（border） 和 外边距（margin） 。</span></p><p style="margin: 10px auto; padding: 0px;"><span style="margin: 0px; padding: 0px; font-size: 15px;">在 CSS 中，width 和 height 指的是内容区域（element）的宽度和高度。增加内边距、边框和外边距不会影响内容区域的尺寸，但是会增加元素框的总尺寸。假设框的每个边上有 10 个像素的外边距和 5 个像素的内边距。如果希望这个元素框达到 100 个像素，就需要将内容的宽度设置为 70 像素。需要的属性如下：</span></p><p style="margin: 10px auto; padding: 0px;">&nbsp;</p><p style="margin: 10px auto; padding: 0px;">基本属性</p><ul style="margin-left: 30px; padding: 0px; word-break: break-all;" class=" list-paddingleft-2"><li><p>Width/Height</p></li><li><p>Padding</p></li><li><p>Margin</p></li><li><p>Boder</p></li><li><p>Outline</p></li><li><p>偏移量属性</p></li><ul style="list-style-type: square;" class=" list-paddingleft-2"><li><p>Top/Left/Bottom/Right</p></li></ul><li><p>和.NET WinForm的区别:</p></li><ul style="list-style-type: square;" class=" list-paddingleft-2"><li><p>默认情况下Width/Height不包含Padding</p></li><li><p>Margin/Padding属性的四个值的顺序是top right bottom left (顺时针)</p></li></ul></ul><p style="margin: 10px auto; padding: 0px;">&nbsp;</p><p style="margin: 10px auto; padding: 0px;"><span style="margin: 0px; padding: 0px; font-size: 15px;"><strong style="margin: 0px; padding: 0px;">&nbsp;所有东西可视为盒子模型</strong></span></p><p style="margin: 10px auto; padding: 0px;"><a href="http://images2015.cnblogs.com/blog/139239/201511/139239-20151130174413921-1181590057.png" style="margin: 0px; padding: 0px; color: rgb(85, 85, 85); font-size: 14px; line-height: 1.5;"><img title="image" src="http://images2015.cnblogs.com/blog/139239/201511/139239-20151130174414671-288892895.png" alt="image" width="691" height="449" border="0" style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none;"/></a></p><p style="margin: 10px auto; padding: 0px;">&nbsp;</p><h3 style="margin: 15px auto 2px; padding: 0px; font-size: 16px;">纵向Margin合并</h3><p style="margin: 10px auto; padding: 0px;">如果&lt;p&gt;的纵向margin是12px，那么两个&lt;p&gt;之间纵向的距离是多少？按常理来说应该是 12 + 12= 24px，但是答案仍然是 12px。因为纵向的margin是会重叠的，大的会覆盖下的。</p><p style="margin: 10px auto; padding: 0px;"><a href="http://images2015.cnblogs.com/blog/139239/201511/139239-20151130174415655-846034746.png" style="margin: 0px; padding: 0px; color: rgb(85, 85, 85);"><img title="image" src="http://images2015.cnblogs.com/blog/139239/201511/139239-20151130174416483-1027983017.png" alt="image" width="701" height="434" border="0" style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none;"/></a></p><p style="margin: 10px auto; padding: 0px;">&nbsp;</p><p style="margin: 10px auto; padding: 0px;">Position属性规定元素的定位类型。这个属性定义建立元素布局所用的定位机制。任何元素都可以定位，不过绝对或固定元素会生成一个块级框，而不论该元素本身是什么类型。相对定位元素会相对于它在正常流中的默认位置偏移。以下是Posistion属性取值范围如下：</p><ul style="margin-left: 30px; padding: 0px; word-break: break-all;" class=" list-paddingleft-2"><li><p>Static 普通流布局（Normal flow） ，默认值。没有定位，元素出现在正常的流中（忽略 top, bottom, left, right 或者 z-index 声明）。</p></li><li><p>Relative 支持偏移量属性的普通流布局 ，生成相对定位的元素，相对于其正常位置进行定位。因此，&quot;left:20&quot; 会向元素的 LEFT 位置添加 20 像素。</p></li><li><p>Absolute 在容器元素内绝对定位的布局 ，生成绝对定位的元素，相对于 static 定位以外的第一个父元素进行定位。元素的位置通过 &quot;left&quot;, &quot;top&quot;, &quot;right&quot; 以及 &quot;bottom&quot; 属性进行规定。</p></li><li><p>Fixed 在显示范围内的绝对定位布局，生成绝对定位的元素，相对于浏览器窗口进行定位。元素的位置通过 &quot;left&quot;, &quot;top&quot;, &quot;right&quot; 以及 &quot;bottom&quot; 属性进行规定。</p></li></ul><p style="margin: 10px auto; padding: 0px;">&nbsp;</p><p style="margin: 10px auto; padding: 0px;"><a href="http://images2015.cnblogs.com/blog/139239/201511/139239-20151130174418671-558149219.png" style="margin: 0px; padding: 0px; color: rgb(85, 85, 85);"><img title="image" src="http://images2015.cnblogs.com/blog/139239/201511/139239-20151130174419202-980025400.png" alt="image" width="704" height="409" border="0" style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none;"/></a></p><h3 style="margin: 15px auto 2px; padding: 0px; font-size: 16px;"><span style="margin: 0px; padding: 0px;">Float属性</span></h3><p style="margin: 10px auto; padding: 0px;">float 属性定义元素在哪个方向浮动。以往这个属性总应用于图像，使文本围绕在图像周围，不过在 CSS 中，任何元素都可以浮动。浮动元素会生成一个块级框，而不论它本身是何种元素。</p><p style="margin: 10px auto; padding: 0px;"><a href="http://images2015.cnblogs.com/blog/139239/201512/139239-20151203151954283-474616953.png" style="margin: 0px; padding: 0px; color: rgb(85, 85, 85);"><img title="image" src="http://images2015.cnblogs.com/blog/139239/201512/139239-20151203151954893-1604870435.png" alt="image" width="706" height="422" border="0" style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none;"/></a></p><p style="margin: 10px auto; padding: 0px;">&nbsp;</p><h2 style="margin: 15px auto 2px; padding: 0px; font-size: 21px;">Stacking context</h2><p style="margin: 10px auto; padding: 0px;">提供z-index栈空间特性并影响子元素渲染顺序的结构，称之为stacking context。</p><p style="margin: 10px auto; padding: 0px;"><a href="http://images2015.cnblogs.com/blog/139239/201511/139239-20151130174421265-568461873.png" style="margin: 0px; padding: 0px; color: rgb(85, 85, 85);"><img title="image" src="http://images2015.cnblogs.com/blog/139239/201511/139239-20151130174422046-1758484081.png" alt="image" width="713" height="503" border="0" style="margin: 0px; padding: 0px; border: 0px; display: inline; width: 711px; background-image: none;"/></a></p><p style="margin: 10px auto; padding: 0px;">&nbsp;</p><p style="margin: 10px auto; padding: 0px;">浏览器会给符合下面规则的dom元素分配一个Stacking context。</p><ul style="margin-left: 30px; padding: 0px; word-break: break-all;" class=" list-paddingleft-2"><li><p>root元素(html)</p></li><li><p>「已定位」元素（position: absolute or relative）且 指定z-index值非auto的元素</p></li><li><p>flex item且指定z-index值非auto的元素</p></li><li><p>opacity小于1的元素</p></li><li><p>指定transform值非none的元素</p></li><li><p>指定mix-blend-mode值非normal的元素</p></li><li><p>指定filter值非none的元素</p></li><li><p>指定isolation值为isolate的元素</p></li><li><p>在will-change属性上指定值为上述列表任意属性的元素</p></li><li><p>指定-webkit-overflow-scrolling值为touch的元素</p></li></ul><h3 style="margin: 15px auto 2px; padding: 0px; font-size: 16px;"><span style="margin: 0px; padding: 0px;">z-index</span></h3><p style="margin: 10px auto; padding: 0px;"><a href="http://images2015.cnblogs.com/blog/139239/201511/139239-20151130174424858-1857496339.png" style="margin: 0px; padding: 0px; color: rgb(85, 85, 85);"><img title="image" src="http://images2015.cnblogs.com/blog/139239/201511/139239-20151130174425390-1584505043.png" alt="image" width="737" height="398" border="0" style="margin: 0px; padding: 0px; border: 0px; display: inline; width: 711px; background-image: none;"/></a></p><p style="margin: 10px auto; padding: 0px;">&nbsp;</p><h2 style="margin: 15px auto 2px; padding: 0px; font-size: 21px;"><span style="margin: 0px; padding: 0px;">Stacking order</span></h2><ul style="margin-left: 30px; padding: 0px; word-break: break-all;" class=" list-paddingleft-2"><li><p>根据DOM树结构，具有stacking context的元素会形成一个树形结构。</p></li><li><p>一个stacking context中的元素会根据z-index决定叠加顺序。z-index大的靠前</p></li><li><p>z-index 0级元素中，有stacking context的元素的叠加顺序靠前&nbsp;</p></li><li><p>以上条件不能区分时，使用DOM树中的顺序决定叠加顺序。</p></li></ul><p style="margin: 10px auto; padding: 0px;">&nbsp;</p><p style="margin: 10px auto; padding: 0px;"><a href="http://images2015.cnblogs.com/blog/139239/201512/139239-20151203151955924-921074931.png" style="margin: 0px; padding: 0px; color: rgb(85, 85, 85);"><img title="image" src="http://images2015.cnblogs.com/blog/139239/201512/139239-20151203151956627-527917959.png" alt="image" width="703" height="235" border="0" style="margin: 0px; padding: 0px; border: 0px; display: inline; background-image: none;"/></a></p><p style="margin: 10px auto; padding: 0px;">&nbsp;</p><h2 style="margin: 15px auto 2px; padding: 0px; font-size: 21px;">性能</h2><p style="margin: 10px auto; padding: 0px;"><a href="http://images2015.cnblogs.com/blog/139239/201511/139239-20151130174428093-630539228.png" style="margin: 0px; padding: 0px; color: rgb(85, 85, 85);"><img title="image" src="http://images2015.cnblogs.com/blog/139239/201511/139239-20151130174428499-1563386375.png" alt="image" width="721" height="476" border="0" style="margin: 0px; padding: 0px; border: 0px; display: inline; width: 711px; background-image: none;"/></a></p><p style="margin: 10px auto; padding: 0px;">&nbsp;</p><h4 style="margin: 15px auto 2px; padding: 0px; font-size: 14px; color: rgb(51, 51, 51);">像素渲染流水线</h4><p style="margin: 10px auto; padding: 0px;"><img src="https://s3.amazonaws.com/media-p.slid.es/uploads/409012/images/1968184/pasted-from-clipboard.png" alt="" width="674" height="103" style="margin: 0px; padding: 0px; border: 0px;"/></p><p style="margin: 10px auto; padding: 0px;">提升性能需要在构造流水线中每个元素都需要注意：</p><ul style="margin-left: 30px; padding: 0px; word-break: break-all;" class=" list-paddingleft-2"><li><p>Style</p></li><ul style="list-style-type: square;" class=" list-paddingleft-2"><li><p>降低样式选择器的复杂度</p></li><li><p>减少需要执行样式计算的元素的个数</p></li></ul><li><p>Layout</p></li><ul style="list-style-type: square;" class=" list-paddingleft-2"><li><p>几乎所有的布局都是在整个文档范围内发生的。</p></li><li><p>使用flexbox替代老的布局模型</p></li><li><p>避免强制同步布局事件的发生</p></li><li><p>避免快速连续的布局</p></li><li><p>尽可能避免触发布局</p></li></ul></ul><ul style="margin-left: 30px; padding: 0px; word-break: break-all;" class=" list-paddingleft-2"><li><p>Paint</p></li><ul style="list-style-type: square;" class=" list-paddingleft-2"><li><p>除了transform和opacity之外，修改任何属性都会触发绘制</p></li><li><p>提升移动或渐变元素的绘制层</p></li><li><p>减少绘制区域</p></li><li><p>简化绘制的复杂度</p></li></ul></ul><h4 style="margin: 15px auto 2px; padding: 0px; font-size: 14px; color: rgb(51, 51, 51);">CSS 选择器性能</h4><ul style="margin-left: 30px; padding: 0px; word-break: break-all;" class=" list-paddingleft-2"><li><p>一个选择器的最右端是这个选择器的关键条件（Key Selector）</p></li><li><p>浏览器按照从右向左的方式匹配选择器，因此应该将更具体的条件尽可能放在右端。</p></li><li><p>避免使用*规则</p></li><li><p>选择器尽可能短</p></li><li><p>ID选择符前面不要再加限定符</p></li><li><p>没必要用Tag选择符限定Class选择符</p></li></ul><p style="margin: 10px auto; padding: 0px;">&nbsp;</p><p style="margin: 10px auto; padding: 0px;">&nbsp;</p><p><br/></p>
                        </code>
                        </pre>
                        <div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_qzone" data-cmd="qzone"></a><a href="#" class="bds_tsina" data-cmd="tsina"></a><a href="#" class="bds_tqq" data-cmd="tqq"></a><a href="#" class="bds_renren" data-cmd="renren"></a><a href="#" class="bds_weixin" data-cmd="weixin"></a></div>
                        <!-- UY BEGIN -->
                        <div id="uyan_frame"></div>
                        <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2113268"></script>
                        <!-- UY END -->
                    </div>
                </div>
                <div id="footerInnerSeparator"></div>
            </div>
        </div>
        <div id="footerOuterSeparator"></div>
    </div>
    <br /><br /><br />
    <script src="../../js/jquery-1.9.1.js"></script>
    <script>
        window._bd_share_config = { "common": { "bdSnsKey": {}, "bdText": $("#divMain pre code").text(), "bdMini": "2", "bdPic": "", "bdStyle": "0", "bdSize": "16" }, "share": {}, "image": { "viewList": ["qzone", "tsina", "tqq", "renren", "weixin"], "viewText": "分享到：", "viewSize": "16" }, "selectShare": { "bdContainerClass": null, "bdSelectMiniList": ["qzone", "tsina", "tqq", "renren", "weixin"] } }; with (document) 0[(getElementsByTagName('head')[0] || body).appendChild(createElement('script')).src = 'http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion=' + ~(-new Date() / 36e5)];
    </script>
</body>
</html>