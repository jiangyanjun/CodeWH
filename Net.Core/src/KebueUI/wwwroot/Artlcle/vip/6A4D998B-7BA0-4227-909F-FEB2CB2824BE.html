<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="Language" content="zh-CN">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../../images/kebue.ico">
    <link rel="icon" href="../../images/kebue.ico">
    <meta name="description" content=Oracle 查询表空间>
    <meta name="keywords" content=SELECT t1 表空间,z 总表空间,z-s 已用表空间,s 剩余表空间,ROUND((z-s)/z*100,2) 使用率%   From （Select tablespace_name t1,Sum(bytes) s       From DBA_FREE_SPACE Group by tablespace_name),      (Select tablespace_name t2,Sum>
    <title>Oracle 查询表空间</title>

    <link href="../../template/scripts/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../../template/styles/custom.css" rel="stylesheet" />
</head>
<body id="pageBody">
    <div id="divBoxed" class="container">
        <div class="transparent-bg" style="position: absolute;top: 0;left: 0;width: 100%;height: 100%;z-index: -1;zoom: 1;"></div>
        <div class="divPanel notop nobottom">
            <div class="row-fluid">
                <div class="span12">
                    <div id="divLogo">
                        <a href="../../../Home/Index" id="divSiteTitle">科布尔 kebue</a><br />
                        <a href="../../../Home/Index" id="divTagLine">开发者用代码改变世界从科布尔开始</a>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    <div id="divMenuRight" class="pull-right">
                        <div class="navbar">
                            <button type="button" class="btn btn-navbar-highlight btn-large btn-primary" data-toggle="collapse" data-target=".nav-collapse">
                                NAVIGATION <span class="icon-chevron-down icon-white"></span>
                            </button>
                            <div class="nav-collapse collapse">
                                <ul class="nav nav-pills ddmenu">
                                    <li class="dropdown glyphicon glyphicon-arrow-left"><a href='javascript:window.history.back()'>后退</a></li>
                                    <li class="dropdown active"><a href="http://www.kebue.com/">Home</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    <div id="contentInnerSeparator"></div>
                </div>
            </div>
        </div>
        <div class="contentArea">
            <div class="divPanel notop page-content">
                <div class="breadcrumbs">
                    <a href="../../../Home/Index">Home</a> &nbsp;/&nbsp; <span><a href='../../../../../Artlcle/ArticleType/0D8667FF-B247-4368-A163-B9D7274FE236.html' title='Oracle'>Oracle</a></span>
                </div>
                <div class="row-fluid">
                    <div class="span12" id="divMain">
                        <h1>Oracle 查询表空间</h1>
                        <pre>
                        <code>
                            <p>SELECT t1 表空间,z 总表空间,z-s 已用表空间,s 剩余表空间,ROUND((z-s)/z*100,2) &quot;使用率%&quot; &nbsp; &nbsp; From （Select tablespace_name t1,Sum(bytes) s &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;From DBA_FREE_SPACE Group by tablespace_name), &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (Select tablespace_name t2,Sum(bytes) z &nbsp;</p><p>&nbsp; &nbsp; &nbsp; &nbsp;From DBA_DATA_FILES Group by tablespace_name) Where t1=t2;</p><p>&nbsp; &nbsp; &nbsp; &nbsp;</p><p>&nbsp; &nbsp; &nbsp; &nbsp;</p><p>&nbsp; &nbsp; &nbsp; &nbsp;select username,default_tablespace from dba_users;</p><p>&nbsp; &nbsp; &nbsp; &nbsp;select a.tablespace_name,a.bytes/1024/1024 &quot;Sum MB&quot;,(a.bytes-b.bytes)/1024/1024 &quot;used MB&quot;,b.bytes/1024/1024 &quot;free MB&quot;,</p><p>round(((a.bytes-b.bytes)/a.bytes)*100,2) &quot;percent_used&quot;from(select tablespace_name,sum(bytes) bytes from dba_data_files group by tablespace_name) a,</p><p>(select tablespace_name,sum(bytes) bytes,max(bytes) largest from dba_free_space group by tablespace_name) b</p><pre style="font-family: Monaco, Consolas, Courier, &#39;Lucida Console&#39;, monospace; background-color: inherit;">--查询表空间使用情况SELECTUpper(F.TABLESPACE_NAME)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;表空间名&quot;,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.TOT_GROOTTE_MB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;表空间大小(M)&quot;,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D.TOT_GROOTTE_MB&nbsp;-&nbsp;F.TOTAL_BYTES&nbsp;&quot;已使用空间(M)&quot;,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;To_char(Round((&nbsp;D.TOT_GROOTTE_MB&nbsp;-&nbsp;F.TOTAL_BYTES&nbsp;)&nbsp;/&nbsp;D.TOT_GROOTTE_MB&nbsp;*100,&nbsp;2),&nbsp;&#39;990.99&#39;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&#39;%&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;使用比&quot;,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F.TOTAL_BYTES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;空闲空间(M)&quot;,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F.MAX_BYTES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;最大块(M)&quot;FROM&nbsp;&nbsp;&nbsp;(SELECT&nbsp;TABLESPACE_NAME,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Round(Sum(BYTES)&nbsp;/&nbsp;(&nbsp;1024*1024&nbsp;),&nbsp;2)&nbsp;TOTAL_BYTES,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Round(Max(BYTES)&nbsp;/&nbsp;(&nbsp;1024*1024&nbsp;),&nbsp;2)&nbsp;MAX_BYTES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;&nbsp;&nbsp;SYS.DBA_FREE_SPACE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GROUPBY&nbsp;TABLESPACE_NAME)&nbsp;F,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(SELECT&nbsp;DD.TABLESPACE_NAME,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Round(Sum(DD.BYTES)&nbsp;/&nbsp;(&nbsp;1024*1024&nbsp;),&nbsp;2)&nbsp;TOT_GROOTTE_MB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;&nbsp;&nbsp;SYS.DBA_DATA_FILES&nbsp;DD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GROUPBY&nbsp;DD.TABLESPACE_NAME)&nbsp;DWHERE&nbsp;&nbsp;D.TABLESPACE_NAME&nbsp;=&nbsp;F.TABLESPACE_NAMEORDERBY1--查询表空间的free&nbsp;spaceselect&nbsp;tablespace_name,&nbsp;count(*)&nbsp;AS&nbsp;extends,round(sum(bytes)&nbsp;/1024/1024,&nbsp;2)&nbsp;AS&nbsp;MB,sum(blocks)&nbsp;AS&nbsp;blocks&nbsp;from&nbsp;dba_free_space&nbsp;groupBY&nbsp;tablespace_name;--查询表空间的总容量select&nbsp;tablespace_name,&nbsp;sum(bytes)&nbsp;/1024/1024as&nbsp;MB&nbsp;from&nbsp;dba_data_files&nbsp;groupby&nbsp;tablespace_name;--查询表空间使用率SELECT&nbsp;total.tablespace_name,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Round(total.MB,&nbsp;2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AS&nbsp;Total_MB,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Round(total.MB&nbsp;-&nbsp;free.MB,&nbsp;2)&nbsp;AS&nbsp;Used_MB,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Round((&nbsp;1-&nbsp;free.MB&nbsp;/&nbsp;total.MB&nbsp;)&nbsp;*100,&nbsp;2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&#39;%&#39;AS&nbsp;Used_PctFROM&nbsp;&nbsp;&nbsp;(SELECT&nbsp;tablespace_name,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sum(bytes)&nbsp;/1024/1024AS&nbsp;MB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;&nbsp;&nbsp;dba_free_space&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GROUPBY&nbsp;tablespace_name)&nbsp;free,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(SELECT&nbsp;tablespace_name,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sum(bytes)&nbsp;/1024/1024AS&nbsp;MB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;&nbsp;&nbsp;dba_data_files&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GROUPBY&nbsp;tablespace_name)&nbsp;totalWHERE&nbsp;&nbsp;free.tablespace_name&nbsp;=&nbsp;total.tablespace_name;</pre><p><span style="background-color: inherit;"><img src="http://mmmxa.com/ueditor/themes/default/images/spacer.gif" alt="复制代码" data-media-type="image" data-attr-org-src-id="0AF73F973A0D4F209695048DA2DEB7FB" data-attr-org-img-file="file:///C:/Users/Tony.Jiang/AppData/Local/YNote/data/aaaaq@126.com/3895dc3254cc49a3b232800fb3477e11/copycode.gif" style="background:url(http://mmmxa.com/ueditor/lang/zh-cn/images/localimage.png) no-repeat center center;border:1px solid #ddd" word_img="file:///C:/Users/Tony.Jiang/AppData/Local/YNote/data/aaaaq@126.com/3895dc3254cc49a3b232800fb3477e11/copycode.gif"/></span></p><p style="background-color: inherit;"><span style="background-color: inherit;">上述语句查询结果如下图所示：</span></p><p style="background-color: inherit;"><img src="http://mmmxa.com/ueditor/themes/default/images/spacer.gif" data-media-type="image" data-attr-org-src-id="FDA7FE0DC87F4FBCBBFFDFA08C57CFCE" data-attr-org-img-file="file:///C:/Users/Tony.Jiang/AppData/Local/YNote/data/aaaaq@126.com/6a937961e0d04065a5a3255479ad2082/3426cf780742.png" style="background:url(http://mmmxa.com/ueditor/lang/zh-cn/images/localimage.png) no-repeat center center;border:1px solid #ddd" word_img="file:///C:/Users/Tony.Jiang/AppData/Local/YNote/data/aaaaq@126.com/6a937961e0d04065a5a3255479ad2082/3426cf780742.png"/></p><p style="background-color: inherit;">&nbsp;</p><h3 style="background-color: inherit;">参考2：</h3><p><span style="background-color: inherit;"><img src="http://mmmxa.com/ueditor/themes/default/images/spacer.gif" alt="复制代码" data-media-type="image" data-attr-org-src-id="0AF73F973A0D4F209695048DA2DEB7FB" data-attr-org-img-file="file:///C:/Users/Tony.Jiang/AppData/Local/YNote/data/aaaaq@126.com/3895dc3254cc49a3b232800fb3477e11/copycode.gif" style="background:url(http://mmmxa.com/ueditor/lang/zh-cn/images/localimage.png) no-repeat center center;border:1px solid #ddd" word_img="file:///C:/Users/Tony.Jiang/AppData/Local/YNote/data/aaaaq@126.com/3895dc3254cc49a3b232800fb3477e11/copycode.gif"/></span></p><pre style="font-family: Monaco, Consolas, Courier, &#39;Lucida Console&#39;, monospace; background-color: inherit;">SELECT&nbsp;a.tablespace_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;表空间名&quot;,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;total&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;表空间大小&quot;,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;free&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;表空间剩余大小&quot;,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&nbsp;total&nbsp;-&nbsp;free&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;表空间使用大小&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Round((&nbsp;total&nbsp;-&nbsp;free&nbsp;)&nbsp;/&nbsp;total,&nbsp;4)&nbsp;*100&nbsp;&quot;使用率&nbsp;&nbsp;&nbsp;%&quot;FROM&nbsp;&nbsp;&nbsp;(SELECT&nbsp;tablespace_name,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sum(bytes)&nbsp;free&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;&nbsp;&nbsp;DBA_FREE_SPACE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GROUPBY&nbsp;tablespace_name)&nbsp;a,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(SELECT&nbsp;tablespace_name,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sum(bytes)&nbsp;total&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;&nbsp;&nbsp;DBA_DATA_FILES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GROUPBY&nbsp;tablespace_name)&nbsp;bWHERE&nbsp;&nbsp;a.tablespace_name&nbsp;=&nbsp;b.tablespace_name</pre><p><span style="background-color: inherit;"><img src="http://mmmxa.com/ueditor/themes/default/images/spacer.gif" alt="复制代码" data-media-type="image" data-attr-org-src-id="0AF73F973A0D4F209695048DA2DEB7FB" data-attr-org-img-file="file:///C:/Users/Tony.Jiang/AppData/Local/YNote/data/aaaaq@126.com/3895dc3254cc49a3b232800fb3477e11/copycode.gif" style="background:url(http://mmmxa.com/ueditor/lang/zh-cn/images/localimage.png) no-repeat center center;border:1px solid #ddd" word_img="file:///C:/Users/Tony.Jiang/AppData/Local/YNote/data/aaaaq@126.com/3895dc3254cc49a3b232800fb3477e11/copycode.gif"/></span></p><p style="background-color: inherit;">查询结果</p><p style="background-color: inherit;"><img src="http://mmmxa.com/ueditor/themes/default/images/spacer.gif" data-media-type="image" data-attr-org-src-id="BAE7B8FA2F4A431EB34EE04E4E1EEE1A" data-attr-org-img-file="file:///C:/Users/Tony.Jiang/AppData/Local/YNote/data/aaaaq@126.com/a0576f6f292f4f39825de935afe90139/ad7009856e17.png" style="background:url(http://mmmxa.com/ueditor/lang/zh-cn/images/localimage.png) no-repeat center center;border:1px solid #ddd" word_img="file:///C:/Users/Tony.Jiang/AppData/Local/YNote/data/aaaaq@126.com/a0576f6f292f4f39825de935afe90139/ad7009856e17.png"/></p><p style="background-color: inherit;">&nbsp;</p><h3 style="background-color: inherit;">参考3</h3><p><span style="background-color: inherit;"><img src="http://mmmxa.com/ueditor/themes/default/images/spacer.gif" alt="复制代码" data-media-type="image" data-attr-org-src-id="0AF73F973A0D4F209695048DA2DEB7FB" data-attr-org-img-file="file:///C:/Users/Tony.Jiang/AppData/Local/YNote/data/aaaaq@126.com/3895dc3254cc49a3b232800fb3477e11/copycode.gif" style="background:url(http://mmmxa.com/ueditor/lang/zh-cn/images/localimage.png) no-repeat center center;border:1px solid #ddd" word_img="file:///C:/Users/Tony.Jiang/AppData/Local/YNote/data/aaaaq@126.com/3895dc3254cc49a3b232800fb3477e11/copycode.gif"/></span></p><pre style="font-family: Monaco, Consolas, Courier, &#39;Lucida Console&#39;, monospace; background-color: inherit;">SELECT&nbsp;TABLESPACE_NAME&nbsp;&quot;表空间&quot;,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;To_char(Round(BYTES&nbsp;/1024,&nbsp;2),&nbsp;&#39;99990.00&#39;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&#39;&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;实有&quot;,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;To_char(Round(FREE&nbsp;/1024,&nbsp;2),&nbsp;&#39;99990.00&#39;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&#39;G&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;现有&quot;,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;To_char(Round((&nbsp;BYTES&nbsp;-&nbsp;FREE&nbsp;)&nbsp;/1024,&nbsp;2),&nbsp;&#39;99990.00&#39;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&#39;G&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;使用&quot;,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;To_char(Round(10000*&nbsp;USED&nbsp;/&nbsp;BYTES)&nbsp;/100,&nbsp;&#39;99990.00&#39;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&#39;%&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;比例&quot;FROM&nbsp;&nbsp;&nbsp;(SELECT&nbsp;A.TABLESPACE_NAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TABLESPACE_NAME,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Floor(A.BYTES&nbsp;/&nbsp;(&nbsp;1024*1024&nbsp;))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BYTES,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Floor(B.FREE&nbsp;/&nbsp;(&nbsp;1024*1024&nbsp;))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FREE,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Floor((&nbsp;A.BYTES&nbsp;-&nbsp;B.FREE&nbsp;)&nbsp;/&nbsp;(&nbsp;1024*1024&nbsp;))&nbsp;USED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;&nbsp;&nbsp;(SELECT&nbsp;TABLESPACE_NAME&nbsp;TABLESPACE_NAME,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sum(BYTES)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BYTES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;&nbsp;&nbsp;DBA_DATA_FILES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GROUPBY&nbsp;TABLESPACE_NAME)&nbsp;A,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(SELECT&nbsp;TABLESPACE_NAME&nbsp;TABLESPACE_NAME,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sum(BYTES)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FREE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;&nbsp;&nbsp;DBA_FREE_SPACE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GROUPBY&nbsp;TABLESPACE_NAME)&nbsp;B&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;&nbsp;A.TABLESPACE_NAME&nbsp;=&nbsp;B.TABLESPACE_NAME)--WHERE&nbsp;TABLESPACE_NAME&nbsp;LIKE&nbsp;&#39;CDR%&#39;&nbsp;--这一句用于指定表空间名称ORDERBYFloor(10000*&nbsp;USED&nbsp;/&nbsp;BYTES)&nbsp;DESC;</pre><p><span style="background-color: inherit;"><img src="http://mmmxa.com/ueditor/themes/default/images/spacer.gif" alt="复制代码" data-media-type="image" data-attr-org-src-id="0AF73F973A0D4F209695048DA2DEB7FB" data-attr-org-img-file="file:///C:/Users/Tony.Jiang/AppData/Local/YNote/data/aaaaq@126.com/3895dc3254cc49a3b232800fb3477e11/copycode.gif" style="background:url(http://mmmxa.com/ueditor/lang/zh-cn/images/localimage.png) no-repeat center center;border:1px solid #ddd" word_img="file:///C:/Users/Tony.Jiang/AppData/Local/YNote/data/aaaaq@126.com/3895dc3254cc49a3b232800fb3477e11/copycode.gif"/></span></p><p style="background-color: inherit;">查询结果</p><p style="background-color: inherit;"><img src="http://mmmxa.com/ueditor/themes/default/images/spacer.gif" data-media-type="image" data-attr-org-src-id="A7468905A11842EDB48F9817FF5F782F" data-attr-org-img-file="file:///C:/Users/Tony.Jiang/AppData/Local/YNote/data/aaaaq@126.com/92cf9062e5704cba91ffa00fbb116b1c/62e0383563c8.png" style="background:url(http://mmmxa.com/ueditor/lang/zh-cn/images/localimage.png) no-repeat center center;border:1px solid #ddd" word_img="file:///C:/Users/Tony.Jiang/AppData/Local/YNote/data/aaaaq@126.com/92cf9062e5704cba91ffa00fbb116b1c/62e0383563c8.png"/></p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">&nbsp;</p><p><span style="background-color: inherit;"><img src="http://mmmxa.com/ueditor/themes/default/images/spacer.gif" alt="复制代码" data-media-type="image" data-attr-org-src-id="0AF73F973A0D4F209695048DA2DEB7FB" data-attr-org-img-file="file:///C:/Users/Tony.Jiang/AppData/Local/YNote/data/aaaaq@126.com/3895dc3254cc49a3b232800fb3477e11/copycode.gif" style="background:url(http://mmmxa.com/ueditor/lang/zh-cn/images/localimage.png) no-repeat center center;border:1px solid #ddd" word_img="file:///C:/Users/Tony.Jiang/AppData/Local/YNote/data/aaaaq@126.com/3895dc3254cc49a3b232800fb3477e11/copycode.gif"/></span></p><pre style="font-family: Monaco, Consolas, Courier, &#39;Lucida Console&#39;, monospace; background-color: inherit;">select&nbsp;tablespace_name,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_gb,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;used_gb,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;round(100*&nbsp;used_gb&nbsp;/&nbsp;max_gb)&nbsp;pct_used&nbsp;&nbsp;from&nbsp;(select&nbsp;a.tablespace_name&nbsp;tablespace_name,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;round((a.bytes_alloc&nbsp;-&nbsp;nvl(b.bytes_free,&nbsp;0))&nbsp;/power(2,&nbsp;30),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)&nbsp;used_gb,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;round(a.maxbytes&nbsp;/power(2,&nbsp;30),&nbsp;2)&nbsp;max_gb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;(select&nbsp;f.tablespace_name,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sum(f.bytes)&nbsp;bytes_alloc,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sum(decode(f.autoextensible,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;YES&#39;,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f.maxbytes,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;NO&#39;,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f.bytes))&nbsp;maxbytes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;dba_data_files&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groupby&nbsp;tablespace_name)&nbsp;a,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(select&nbsp;f.tablespace_name,&nbsp;sum(f.bytes)&nbsp;bytes_free&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;dba_free_space&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groupby&nbsp;tablespace_name)&nbsp;b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;a.tablespace_name&nbsp;=&nbsp;b.tablespace_name(+)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unionallselect&nbsp;h.tablespace_name&nbsp;tablespace_name,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;round(sum(nvl(p.bytes_used,&nbsp;0))&nbsp;/power(2,&nbsp;30),&nbsp;2)&nbsp;used_gb,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;round(sum(decode(f.autoextensible,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;YES&#39;,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f.maxbytes,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;NO&#39;,  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f.bytes))&nbsp;/power(2,&nbsp;30),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)&nbsp;max_gb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;v$temp_space_header&nbsp;h,&nbsp;v$temp_extent_pool&nbsp;p,&nbsp;dba_temp_files&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;p.file_id(+)&nbsp;=&nbsp;h.file_idand&nbsp;p.tablespace_name(+)&nbsp;=&nbsp;h.tablespace_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;f.file_id=&nbsp;h.file_idand&nbsp;f.tablespace_name&nbsp;=&nbsp;h.tablespace_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;groupby&nbsp;h.tablespace_name)orderby4;</pre><p><br/></p>
                        </code>
                        </pre>
                        <div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_qzone" data-cmd="qzone"></a><a href="#" class="bds_tsina" data-cmd="tsina"></a><a href="#" class="bds_tqq" data-cmd="tqq"></a><a href="#" class="bds_renren" data-cmd="renren"></a><a href="#" class="bds_weixin" data-cmd="weixin"></a></div>
                        <!-- UY BEGIN -->
                        <div id="uyan_frame"></div>
                        <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2113268"></script>
                        <!-- UY END -->
                    </div>
                </div>
                <div id="footerInnerSeparator"></div>
            </div>
        </div>
        <div id="footerOuterSeparator"></div>
    </div>
    <br /><br /><br />
    <script src="../../js/jquery-1.9.1.js"></script>
    <script>
        window._bd_share_config = { "common": { "bdSnsKey": {}, "bdText": $("#divMain pre code").text(), "bdMini": "2", "bdPic": "", "bdStyle": "0", "bdSize": "16" }, "share": {}, "image": { "viewList": ["qzone", "tsina", "tqq", "renren", "weixin"], "viewText": "分享到：", "viewSize": "16" }, "selectShare": { "bdContainerClass": null, "bdSelectMiniList": ["qzone", "tsina", "tqq", "renren", "weixin"] } }; with (document) 0[(getElementsByTagName('head')[0] || body).appendChild(createElement('script')).src = 'http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion=' + ~(-new Date() / 36e5)];
    </script>
</body>
</html>