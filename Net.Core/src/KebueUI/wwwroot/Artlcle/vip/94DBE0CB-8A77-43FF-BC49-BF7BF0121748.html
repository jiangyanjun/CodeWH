<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="Language" content="zh-CN">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../../images/kebue.ico">
    <link rel="icon" href="../../images/kebue.ico">
    <meta name="description" content=Ajax原理及简介>
    <meta name="keywords" content=我知道Ajax是google的 google map应该，我们都知道，b/s架构跟c/s架构的区别。所谓的C/S架构其实就是我们常说的胖客户端，需要我们将程序部署到各个客户端上，费时，费力，容易出错，但是也有好处，就是响应能力强，典型的又QQ之类的程序，那B/S架构呢？也就是通俗的网站，程序部署在服务器上，我们通过浏览器浏览内容，B/S是基于HTTP的协议，而HTTP协议的典型特征就是无状态，什么>
    <title>Ajax原理及简介</title>

    <link href="../../template/scripts/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../../template/styles/custom.css" rel="stylesheet" />
</head>
<body id="pageBody">
    <div id="divBoxed" class="container">
        <div class="transparent-bg" style="position: absolute;top: 0;left: 0;width: 100%;height: 100%;z-index: -1;zoom: 1;"></div>
        <div class="divPanel notop nobottom">
            <div class="row-fluid">
                <div class="span12">
                    <div id="divLogo">
                        <a href="../../../Home/Index" id="divSiteTitle">科布尔 kebue</a><br />
                        <a href="../../../Home/Index" id="divTagLine">开发者用代码改变世界从科布尔开始</a>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    <div id="divMenuRight" class="pull-right">
                        <div class="navbar">
                            <button type="button" class="btn btn-navbar-highlight btn-large btn-primary" data-toggle="collapse" data-target=".nav-collapse">
                                NAVIGATION <span class="icon-chevron-down icon-white"></span>
                            </button>
                            <div class="nav-collapse collapse">
                                <ul class="nav nav-pills ddmenu">
                                    <li class="dropdown glyphicon glyphicon-arrow-left"><a href='javascript:window.history.back()'>后退</a></li>
                                    <li class="dropdown active"><a href="http://www.kebue.com/">Home</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    <div id="contentInnerSeparator"></div>
                </div>
            </div>
        </div>
        <div class="contentArea">
            <div class="divPanel notop page-content">
                <div class="breadcrumbs">
                    <a href="../../../Home/Index">Home</a> &nbsp;/&nbsp; <span><a href='../../../../../Artlcle/ArticleType/9D69FD3D-028F-4239-89F1-BAC91B1DFF4A.html' title='JavaScript'>JavaScript</a></span>
                </div>
                <div class="row-fluid">
                    <div class="span12" id="divMain">
                        <h1>Ajax原理及简介</h1>
                        <pre>
                        <code>
                            <p>我知道Ajax是google的 google map应该，我们都知道，b/s架构跟c/s架构的区别。所谓的C/S架构其实就是我们常说的胖客户端，需要我们将程序部署到各个客户端上，费时，费力，容易出错，但是也有好处，就是响应能力强，典型的又QQ之类的程序，那B/S架构呢？也就是通俗的网站，程序部署在服务器上，我们通过浏览器浏览内容，B/S是基于HTTP的协议，而HTTP协议的典型特征就是无状态，什么是无状态，就是客户端不能记住我们操作的状态，或者数据。举一个最简单的例子。</p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p>&lt;body&gt;</p><p><br/></p><p>&nbsp; &nbsp; &lt;form id=&quot;form1&quot; runat=&quot;server&quot;&gt;</p><p><br/></p><p>&nbsp; &nbsp; &lt;div&gt;</p><p><br/></p><p>&nbsp; &nbsp; &lt;asp:TextBox ID=&quot;Mytext&quot; runat=&quot;server&quot;&gt;&lt;/asp:TextBox&gt;</p><p><br/></p><p>&nbsp; &nbsp; &lt;asp:Button ID=&quot;MyButton&quot; Text=&quot;Check here&quot; runat=&quot;server&quot;</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onclick=&quot;MyButton_Click&quot; /&gt;</p><p><br/></p><p>&nbsp; &nbsp; &lt;/div&gt;</p><p><br/></p><p>&nbsp; &nbsp; &lt;/form&gt;</p><p><br/></p><p>&lt;/body&gt;&nbsp;</p><p><br/></p><p><br/></p><p>这里我们有一个最简单的ASP.NET页面，所要实现的功能也是很简单的，一个文本框一个按钮，要实现的功能就是点击一个按钮，文本逛里的数字就加一。</p><p><br/></p><p>后台代码</p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p>public partial class WebForm1 : System.Web.UI.Page</p><p><br/></p><p>{</p><p><br/></p><p>&nbsp; &nbsp; int value = 0;</p><p><br/></p><p>&nbsp; &nbsp; protected void Page_Load(object sender, EventArgs e)</p><p><br/></p><p>&nbsp; &nbsp; {</p><p><br/></p><p>&nbsp;&nbsp;</p><p><br/></p><p>&nbsp; &nbsp; }</p><p><br/></p><p>&nbsp;</p><p><br/></p><p>&nbsp; &nbsp; protected void MyButton_Click(object sender, EventArgs e)</p><p><br/></p><p>&nbsp; &nbsp; {</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; value++;</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; this.Mytext.Text = value.ToString();</p><p><br/></p><p>&nbsp; &nbsp; }</p><p><br/></p><p>}&nbsp;</p><p><br/></p><p><br/></p><p>可是结果却是无论我怎么点击，textbox的值始终是1，但是再winfrom程序里就可以达到我们要的效果，至于原因，我会在ASP.NET的文章里解释，这里只简单的说一下，因为HTTP实际也是请求----响应，一次请求一次响应，彼此之间的请求响应是不互相联系的。那么在我们与浏览器产生交互的时候实际上是向服务器请求数据，然后服务器返回数据给我们。这里就有几个问题，就是每次我们都需要服务器的响应。如果我们想向服务器响应的只是一小部分内容而不是正个页面，这时也还是会返回整个页面，造成长时间的等待，比如验证数据。二就是每次操作都需要往返，用户的体验不好。而Ajax就是为了解决这个问题</p><p><br/></p><p>AJAX（Asynchronous JavaScript and XML）异步Javascript和XML。先看原理图</p><p><br/></p><p><br/></p><p><br/></p><p>　解释一下这幅图</p><p><br/></p><p>&nbsp; 1，用户触发页面事件产生交互，调用事件处理函数</p><p><br/></p><p>&nbsp; 2，事件处理函数利用ajax核心的XMLHttpRequest异步向服务器发起请求</p><p><br/></p><p>&nbsp; 3，服务器响应，触发XMLHttpRequest定义的回调函数</p><p><br/></p><p>&nbsp; 4，根据一系列的属性检测返回状态，如果成功执行代码，如果不成功提示用户</p><p><br/></p><p>　这跟正常的请求响应方式有所不同，但是也不是那么难理解，其实就是整个请求是异步的，异步请求，然后服务器返回，我们处理代码。</p><p><br/></p><p>&nbsp; &nbsp;那么我们刚刚看到了基本原理，也看了AJAX的核心其实就是XMLHttpRequest。现在就介绍一些这个对象，然后看看这个对象怎么使用，这里介绍的例子都是只返回纯文本格式，其实服务器返回的内容的格式可以是XML，也可以是JSON。这里为了简单，返回的都是纯文本。服务器技术为ASP.NET。</p><p><br/></p><p>&nbsp; &nbsp;XMLHttpRequest最早是在IE5中引进的，但是各个浏览器所实现的标准不一样，所以我们在创建的时候要注意，我在Javascript的文章中有写到怎么检测浏览器，可以参考。这里我们采用的是对象/特性检测法</p><p><br/></p><p>&nbsp;</p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p>var xmlHttp;</p><p><br/></p><p>&nbsp;</p><p><br/></p><p>function CreateXMLHttpRequest() {</p><p><br/></p><p>&nbsp; &nbsp; if (window.ActiveXObject) {</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; xmlHttp = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</p><p><br/></p><p>&nbsp; &nbsp; } else {</p><p><br/></p><p>&nbsp; &nbsp; xmlHttp = new XMLHttpRequest();</p><p><br/></p><p>&nbsp; &nbsp; }</p><p><br/></p><p>}&nbsp;</p><p><br/></p><p><br/></p><p>这里我们创建的是一个全局的变量，也可以使这个函数返回值来创建一个局部变量。</p><p><br/></p><p>下面来看看XMLHttpRequest对象的一些属性</p><p><br/></p><p>onreadystatechange &nbsp; &nbsp;//这是一个很重要的属性，即XMLHttpRequest的每个状态改变时都会触发这个事件，即如果我们异步的发送一个请求，请求回来就是改变状态。通常会有一个事件处理函数。</p><p><br/></p><p>readyState &nbsp; &nbsp; //这个属性同样重要，请求的状态。0=未初始化，1=正在加载，2=已加载，3=交互中，4=完成，我们根据状态做不同的操作</p><p><br/></p><p>responseText &nbsp; //服务器的响应，表示为一个串</p><p><br/></p><p>responseXML &nbsp; //服务器的响应，表示为XML。这个对象可以解析为一个DOM对象。</p><p><br/></p><p>statusText &nbsp;//http状态码的相应文本（OK或NotFound：404）</p><p><br/></p><p>XMLHttpRequest的一些方法</p><p><br/></p><p>abort() &nbsp; //停止当前请求</p><p><br/></p><p>getAllResponseHeaders() &nbsp; //把HTTP请求的所有响应首部作为键值对返回</p><p><br/></p><p>getResponseHeader(&quot;header&quot;) &nbsp;//返回指定首部的串值</p><p><br/></p><p>open(&quot;method&quot;,&quot;url&quot;) &nbsp; //建立对服务器的调用。methed参数可以的get，post或put。url参数可以是相对url或绝对url，这个方法还包含3个可选参数。</p><p><br/></p><p>send(content) &nbsp;//向服务器发送请求</p><p><br/></p><p>setRequestHeader(&quot;header&quot;,&quot;value&quot;) &nbsp;//把指定首部设置为所提供的值。在任何设置首部之前必须先调用open().</p><p><br/></p><p>open方法的完整参数open(&quot;method&quot;,&quot;url&quot;,&quot;asynch&quot;,&quot;username&quot;,&quot;password&quot;)，asynch指示是否是异步，默认为true。后面可以指定一个用户名和密码</p><p><br/></p><p>我们要注意的是Contect-Type的类型和是否缓存结果，要是不想缓存结果可以设置成response.setHeader(&quot;Cache—Control&quot;,&quot;no-cache&quot;);或者response.setHeader(&quot;pragma&quot;,&quot;no-cache&quot;);</p><p><br/></p><p>Get和Post的区别</p><p><br/></p><p>get和post的区别</p><p><br/></p><p>1 get是从服务器获取数据，而post则是向服务器提交数据</p><p><br/></p><p>2 get请求的数据会明文的附在在url后，以?的形式分割，而post则是把数据附在HTTP包的包体中</p><p><br/></p><p>3 根据第二点，post比get安全性高</p><p><br/></p><p>4 IE会对URL长度限制，即get的长度限制（2083字节），而Netscape、FireFox等，理论上没有长度限制，其限制取决于操作系统的支持。</p><p><br/></p><p>get和post的区别参考于http://www.cnblogs.com/hyddd/archive/2009/03/31/1426026.html，如想了解更多信息，请参考以上连接。</p><p><br/></p><p>&nbsp;</p><p><br/></p><p>简单的AJAX示例</p><p><br/></p><p>这个示例非常简单，一个文本框，一个按钮。点击按钮，文本框显示服务器端返回的“Hello World”</p><p><br/></p><p>首先我们定义一个函数，这个函数的作用就是实例化一个XMLHttpRequest，我们之前定义过</p><p><br/></p><p>&nbsp;</p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p>var xmlHttp;</p><p><br/></p><p>&nbsp;</p><p><br/></p><p>function CreateXMLHttpRequest() {</p><p><br/></p><p>&nbsp; &nbsp; if (window.ActiveXObject) {</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; xmlHttp = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</p><p><br/></p><p>&nbsp; &nbsp; } else {</p><p><br/></p><p>&nbsp; &nbsp; xmlHttp = new XMLHttpRequest();</p><p><br/></p><p>&nbsp; &nbsp; }</p><p><br/></p><p>}&nbsp;</p><p><br/></p><p><br/></p><p>然后我们定义另外一个函数，这个函数用于异步向服务器发送请求</p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p>function startRequest() {</p><p><br/></p><p>&nbsp; &nbsp; CreateXMLHttpRequest();</p><p><br/></p><p>&nbsp; &nbsp; var url = &quot;HelloWorld.ashx&quot;;</p><p><br/></p><p>&nbsp; &nbsp; xmlHttp.onreadystatechange = handleStateChange</p><p><br/></p><p>&nbsp; &nbsp; xmlHttp.open(&quot;GET&quot;, url.toString());</p><p><br/></p><p>&nbsp; &nbsp; xmlHttp.send(null);</p><p><br/></p><p>}&nbsp;</p><p><br/></p><p><br/></p><p>我们这里的服务端使用的是一般处理程序，ASP.NET还可以使用WebService和后置代码，这个以后再讲</p><p><br/></p><p>然后我们就可以定义回调函数了</p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p>function handleStateChange() {</p><p><br/></p><p>&nbsp; if(xmlHttp.readyState==4)</p><p><br/></p><p>&nbsp; {</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; if (xmlHttp.Status == 200) {</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var otext = document.getElementById(&quot;MyText&quot;);</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; otext.value = xmlHttp.responseText;</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; }</p><p><br/></p><p>&nbsp; }</p><p><br/></p><p>}&nbsp;</p><p><br/></p><p><br/></p><p>html代码</p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p>&lt;body&gt;</p><p><br/></p><p>&nbsp; &nbsp; &lt;form id=&quot;form2&quot; runat=&quot;server&quot;&gt;</p><p><br/></p><p>&nbsp; &nbsp; &lt;div&gt;</p><p><br/></p><p>&nbsp; &nbsp; &lt;input type=&quot;text&quot; id=&quot;Text1&quot; /&gt;</p><p><br/></p><p>&nbsp; &nbsp; &lt;input type=&quot;button&quot; id=&quot;Button1&quot; value=&quot;Check me&quot; onclick=&quot;startRequest()&quot;/&gt;</p><p><br/></p><p>&nbsp; &nbsp; &lt;/div&gt;</p><p><br/></p><p>&nbsp; &nbsp; &lt;/form&gt;</p><p><br/></p><p>&lt;/body&gt;&nbsp;</p><p><br/></p><p><br/></p><p>HelloWorld.ashx代码</p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p>public class HelloWorld : IHttpHandler</p><p><br/></p><p>{</p><p><br/></p><p>&nbsp;</p><p><br/></p><p>&nbsp; &nbsp; public void ProcessRequest(HttpContext context)</p><p><br/></p><p>&nbsp; &nbsp; {</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; context.Response.ContentType = &quot;text/plain&quot;;</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; context.Response.Write(&quot;Hello World&quot;);</p><p><br/></p><p>&nbsp; &nbsp; }</p><p><br/></p><p>&nbsp;</p><p><br/></p><p>&nbsp; &nbsp; public bool IsReusable</p><p><br/></p><p>&nbsp; &nbsp; {</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; get</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; {</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return false;</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; }</p><p><br/></p><p>&nbsp; &nbsp; }</p><p><br/></p><p>}&nbsp;</p><p><br/></p><p><br/></p><p>点击按钮，文本框显示HelloWorld。在这里HelloWorld字符串太短，这个过程我们看不清楚，那我们就返回比较长的字符串来看看效果，我们只需要改动HelloWorld.ashx代码</p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p>public class HelloWorld : IHttpHandler</p><p><br/></p><p>{</p><p><br/></p><p>&nbsp;</p><p><br/></p><p>&nbsp; &nbsp; public void ProcessRequest(HttpContext context)</p><p><br/></p><p>&nbsp; &nbsp; {</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; string s = &quot;&quot;;</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; context.Response.ContentType = &quot;text/plain&quot;;</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; for (int i = 0; i &lt; 9000000; i++)</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; {</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s = i.ToString();</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; }</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; context.Response.Write(&quot;Complete!&quot;);</p><p><br/></p><p>&nbsp; &nbsp; }</p><p><br/></p><p>&nbsp;</p><p><br/></p><p>&nbsp; &nbsp; public bool IsReusable</p><p><br/></p><p>&nbsp; &nbsp; {</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; get</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; {</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return false;</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; }</p><p><br/></p><p>&nbsp; &nbsp; }</p><p><br/></p><p>}&nbsp;</p><p><br/></p><p><br/></p><p>执行循环来延迟服务器响应时间。这时我们就可以看到异步的详细了。我们还可以添加一些东西来完善，比如我们经常看到的loading...</p><p><br/></p><p>需要改动的只是HTML文件　　</p><p><br/></p><p>完整代码如下</p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p><p>&lt;head id=&quot;Head1&quot; runat=&quot;server&quot;&gt;</p><p><br/></p><p>&nbsp; &nbsp; &lt;title&gt;&lt;/title&gt;</p><p><br/></p><p>&nbsp; &nbsp; &lt;script type=&quot;text/javascript&quot;&gt;</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; var xmlHttp;</p><p><br/></p><p><br/></p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; function CreateXMLHttpRequest() {</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (window.ActiveXObject) {</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xmlHttp = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xmlHttp = new XMLHttpRequest();</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; }</p><p><br/></p><p><br/></p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; function startRequest() {</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CreateXMLHttpRequest();</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var url = &quot;HelloWorld.ashx&quot;;</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xmlHttp.onreadystatechange = handleStateChange</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xmlHttp.open(&quot;GET&quot;, url.toString());</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xmlHttp.send(null);</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; }</p><p><br/></p><p><br/></p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; function handleStateChange() {</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (xmlHttp.readyState == 1) {</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var oimage = document.getElementById(&quot;MyImg&quot;);</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; oimage.style.display = &quot;&quot;;</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</p><p><br/></p><p><br/></p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (xmlHttp.readyState == 4) {</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (xmlHttp.Status == 200) {</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var oimage = document.getElementById(&quot;MyImg&quot;);</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; oimage.style.display = &quot;none&quot;;</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var otext = document.getElementById(&quot;MyText&quot;);</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; otext.value = xmlHttp.responseText;</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</p><p><br/></p><p>&nbsp; &nbsp; &nbsp; &nbsp; }</p><p><br/></p><p>&nbsp; &nbsp; &lt;/script&gt;</p><p><br/></p><p>&lt;/head&gt;</p><p><br/></p><p>&lt;body&gt;</p><p><br/></p><p>&nbsp; &nbsp; &lt;form id=&quot;form3&quot; runat=&quot;server&quot;&gt;</p><p><br/></p><p>&nbsp; &nbsp; &lt;div&gt;</p><p><br/></p><p>&nbsp; &nbsp; &lt;input type=&quot;text&quot; id=&quot;Text2&quot; /&gt;</p><p><br/></p><p>&nbsp; &nbsp; &lt;input type=&quot;button&quot; id=&quot;Button2&quot; value=&quot;Check me&quot; onclick=&quot;startRequest()&quot;/&gt;</p><p><br/></p><p>&nbsp; &nbsp; &lt;img id=&quot;MyImg&quot; alt=&quot;&quot; src=&quot;Image/loading.gif&quot; style=&quot;display:none&quot; /&gt;</p><p><br/></p><p>&nbsp; &nbsp; &lt;/div&gt;</p><p><br/></p><p>&nbsp; &nbsp; &lt;/form&gt;</p><p><br/></p><p>&lt;/body&nbsp;</p><p><br/></p>
                        </code>
                        </pre>
                        <div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_qzone" data-cmd="qzone"></a><a href="#" class="bds_tsina" data-cmd="tsina"></a><a href="#" class="bds_tqq" data-cmd="tqq"></a><a href="#" class="bds_renren" data-cmd="renren"></a><a href="#" class="bds_weixin" data-cmd="weixin"></a></div>
                        <!-- UY BEGIN -->
                        <div id="uyan_frame"></div>
                        <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2113268"></script>
                        <!-- UY END -->
                    </div>
                </div>
                <div id="footerInnerSeparator"></div>
            </div>
        </div>
        <div id="footerOuterSeparator"></div>
    </div>
    <br /><br /><br />
    <script src="../../js/jquery-1.9.1.js"></script>
    <script>
        window._bd_share_config = { "common": { "bdSnsKey": {}, "bdText": $("#divMain pre code").text(), "bdMini": "2", "bdPic": "", "bdStyle": "0", "bdSize": "16" }, "share": {}, "image": { "viewList": ["qzone", "tsina", "tqq", "renren", "weixin"], "viewText": "分享到：", "viewSize": "16" }, "selectShare": { "bdContainerClass": null, "bdSelectMiniList": ["qzone", "tsina", "tqq", "renren", "weixin"] } }; with (document) 0[(getElementsByTagName('head')[0] || body).appendChild(createElement('script')).src = 'http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion=' + ~(-new Date() / 36e5)];
    </script>
</body>
</html>