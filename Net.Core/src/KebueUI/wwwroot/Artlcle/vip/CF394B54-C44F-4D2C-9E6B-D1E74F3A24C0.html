<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="Language" content="zh-CN">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../../images/kebue.ico">
    <link rel="icon" href="../../images/kebue.ico">
    <meta name="description" content=SQL---------表的约束>
    <meta name="keywords" content=SQL---------表的约束表的约束防止同一条数据完全重复：主键约束（primarykey）唯一键约束（unique），自增长；防止数据为空：非空约束（notnoll），默认值；防止乱填数据：外键，定义数据类型，check；1主键约束（Primarykeyconstraint）要求主键能够唯一区分每一行数据，主键可以是一列也可是几列组合成主键，并且不允许为空，表中的数据按照主键有序排列，l语句>
    <title>SQL---------表的约束</title>

    <link href="../../template/scripts/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../../template/styles/custom.css" rel="stylesheet" />
</head>
<body id="pageBody">
    <div id="divBoxed" class="container">
        <div class="transparent-bg" style="position: absolute;top: 0;left: 0;width: 100%;height: 100%;z-index: -1;zoom: 1;"></div>
        <div class="divPanel notop nobottom">
            <div class="row-fluid">
                <div class="span12">
                    <div id="divLogo">
                        <a href="../../../Home/Index" id="divSiteTitle">科布尔 kebue</a><br />
                        <a href="../../../Home/Index" id="divTagLine">开发者用代码改变世界从科布尔开始</a>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    <div id="divMenuRight" class="pull-right">
                        <div class="navbar">
                            <button type="button" class="btn btn-navbar-highlight btn-large btn-primary" data-toggle="collapse" data-target=".nav-collapse">
                                NAVIGATION <span class="icon-chevron-down icon-white"></span>
                            </button>
                            <div class="nav-collapse collapse">
                                <ul class="nav nav-pills ddmenu">
                                    <li class="dropdown glyphicon glyphicon-arrow-left"><a href='javascript:window.history.back()'>后退</a></li>
                                    <li class="dropdown active"><a href="http://www.kebue.com/">Home</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    <div id="contentInnerSeparator"></div>
                </div>
            </div>
        </div>
        <div class="contentArea">
            <div class="divPanel notop page-content">
                <div class="breadcrumbs">
                    <a href="../../../Home/Index">Home</a> &nbsp;/&nbsp; <span><a href='../../../../../Artlcle/ArticleType/A6B67D7C-1B75-4AF4-AF00-7D4EF126AFA9.html' title='SQLServer'>SQLServer</a></span>
                </div>
                <div class="row-fluid">
                    <div class="span12" id="divMain">
                        <h1>SQL---------表的约束</h1>
                        <pre>
                        <code>
                            <h1 style="white-space: normal; widows: auto; color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 28px; font-weight: 400; line-height: 1.8; background-color: rgb(255, 255, 255);"><a href="http://www.cnblogs.com/woniu-net/p/4679741.html" style="background-color: inherit; cursor: pointer; color: rgb(51, 51, 51);">SQL---------表的约束</a></h1><p style="background-color: inherit;">表的约束</p><p style="background-color: inherit;">防止同一条数据完全重复：主键约束（<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">primary&nbsp;key</span><span style="background-color: inherit; font-family: 宋体;">）唯一键约束（</span><span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">unique</span><span style="background-color: inherit; font-family: 宋体;">），自增长；</span></p><p style="background-color: inherit;">防止数据为空：&nbsp;非空约束（<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">not&nbsp;noll</span><span style="background-color: inherit; font-family: 宋体;">），默认值；</span></p><p style="background-color: inherit;">防止乱填数据：&nbsp;外键，&nbsp;定义数据类型，<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">check</span><span style="background-color: inherit; font-family: 宋体;">；</span></p><p style="background-color: inherit;">1&nbsp;<span style="background-color: inherit; font-family: 宋体;">主键约束（</span><span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">Primary&nbsp;key&nbsp;constraint</span><span style="background-color: inherit; font-family: 宋体;">）要求主键</span>能够唯一区分每一行数据，主键可以是一列也可是几列组合成主键，并且不允许为空，表中的数据按照主键有序排列，</p><p style="background-color: inherit;">l&nbsp;语句操作：&nbsp;alter&nbsp;table&nbsp;stuinfo&nbsp;add&nbsp;&nbsp;constraint&nbsp;pk-sruno&nbsp;primary&nbsp;key(stuno)</p><p style="background-color: inherit;">l&nbsp;表格操作：在表的设计界面，在相应的列上，右击<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">-&quot;</span><span style="background-color: inherit; font-family: 宋体;">设为主键</span><span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">&quot;/&quot;</span><span style="background-color: inherit; font-family: 宋体;">删除主键</span><span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">&quot;</span>；</p><p style="background-color: inherit;">2&nbsp;<span style="background-color: inherit; font-family: 宋体;">唯一约束</span><span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">(unique&nbsp;constraint)</span><span style="background-color: inherit; font-family: 宋体;">要求该列唯一，允许为空，但只能出现一个空值</span></p><p style="background-color: inherit;">l&nbsp;语句操作：alter&nbsp;table&nbsp;stuinfo&nbsp;add&nbsp;constraint&nbsp;unique<span style="background-color: inherit; font-family: 宋体;">（</span><span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">stuid</span><span style="background-color: inherit; font-family: 宋体;">）</span></p><p style="background-color: inherit;">l&nbsp;表格操作：在表的设计界面上，右击<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">--</span><span style="background-color: inherit; font-family: 宋体;">“索引</span><span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">/</span><span style="background-color: inherit; font-family: 宋体;">键”在弹出窗口上，点击左下角“添加”</span><span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">,</span><span style="background-color: inherit; font-family: 宋体;">右侧属性列表，修改类型——唯一键，设置列</span></p><p style="background-color: inherit;">&nbsp;例子&nbsp;<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">qq&nbsp;</span><span style="background-color: inherit; font-family: 宋体;">号与</span><span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">qq</span><span style="background-color: inherit; font-family: 宋体;">邮箱的关系</span></p><p style="background-color: inherit;">3&nbsp;<span style="background-color: inherit; font-family: 宋体;">检查约束（</span><span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">check&nbsp;constraint</span><span style="background-color: inherit; font-family: 宋体;">）某列取值范围&nbsp;格式限制等&nbsp;例如&nbsp;有关年龄的限制</span></p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">4&nbsp;<span style="background-color: inherit; font-family: 宋体;">默认约束（</span><span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">default&nbsp;constraint</span><span style="background-color: inherit; font-family: 宋体;">）某列的默认值</span></p><p style="background-color: inherit;">语句操作：sxex&nbsp;varchar(2)&nbsp;default(&#39;<span style="background-color: inherit; font-family: 宋体;">男</span><span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">&#39;),</span></p><p style="background-color: inherit;">表格操作：在表的设计界面，选择相应的列，在下面的属性面版中——默认值</p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">例子insert&nbsp;into&nbsp;Studente(sno,sname,sbirthday,class)&nbsp;values(&#39;201&#39;,&#39;<span style="background-color: inherit; font-family: 宋体;">小王</span><span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">&#39;,&#39;1974-06-03&#39;,&#39;95031&#39;)</span></p><p style="background-color: inherit;">5&nbsp;<span style="background-color: inherit; font-family: 宋体;">外键约束（</span><span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">foreeign&nbsp;key&nbsp;constraint</span><span style="background-color: inherit; font-family: 宋体;">）用于建立两表之间的关系，需要制定引用主表的那一列</span></p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">三、自增长列：标识列，<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">Identity</span><span style="background-color: inherit; font-family: 宋体;">列</span></p><p style="background-color: inherit;">1.<span style="background-color: inherit; font-family: 宋体;">不能手动向里面填值。如果要写</span><span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">insert</span><span style="background-color: inherit; font-family: 宋体;">语句的话，则语句应当把这一列忽略</span></p><p style="background-color: inherit;">2.<span style="background-color: inherit; font-family: 宋体;">自增长列主要用于整型、长整型，</span><span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">Decimal</span><span style="background-color: inherit; font-family: 宋体;">类型。</span></p><p style="background-color: inherit;">3.<span style="background-color: inherit; font-family: 宋体;">不要随便把自增长列作为主键。</span></p><p style="background-color: inherit;">--</p><p style="background-color: inherit;">操作：在表的设计界面中，选中相应的列，在下面的属性面版——“标识规范”<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">--</span><span style="background-color: inherit; font-family: 宋体;">选择是</span></p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">防止有些该填的没有填：</p><p style="background-color: inherit;">一、非空约束</p><p style="background-color: inherit;">不能为<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">NULL</span><span style="background-color: inherit; font-family: 宋体;">。</span></p><p style="background-color: inherit;">操作：在表的设计界面中“允许<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">NULL</span><span style="background-color: inherit; font-family: 宋体;">值”中的复选框去掉。</span></p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">二、默认值。</p><p style="background-color: inherit;">如果不给列赋值的话，会使用默认值填上。</p><p style="background-color: inherit;">操作：在表的设计界面，选择相应的列，在下面的属性面版中——默认值</p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">防止乱填：</p><p style="background-color: inherit;">一、<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">Check</span><span style="background-color: inherit; font-family: 宋体;">约束。</span></p><p style="background-color: inherit;">按照某种规则对数据进行检查。</p><p style="background-color: inherit;">操作：在表的设计界面中，右击相应的列，选择“<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">CHECK</span><span style="background-color: inherit; font-family: 宋体;">约束”在弹出的对话框中，设置约束的名称和表达式。</span></p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">二、外键约束。主表，从表。</p><p style="background-color: inherit;">主表是用来约束从表的。外键应当建在从表上。</p><p style="background-color: inherit;">使用主表的主键来约束从表外键。</p><p style="background-color: inherit;">从表中的外键列是不能随便乱填内容的，它只能填写主表主键中存在的数据。</p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">一旦建立起外键关系来，从表的外键不能乱填，反过主表中的主键列也不能乱删除乱改。</p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">级联删除的设置——整理</p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">操作：先建好主表，在从表的设计界面上，右击<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">-</span><span style="background-color: inherit; font-family: 宋体;">“关系”，在弹出的对话框中选择“添加”，在右边属性列表中设“表和列的规范”</span></p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">三、类型。</p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">&nbsp;</p><p style="background-color: inherit;">完整性包括</p><p style="background-color: inherit;">1&nbsp;<span style="background-color: inherit; font-family: 宋体;">实体完整性&nbsp;</span></p><p style="background-color: inherit;">数据行不能存在重复</p><p style="background-color: inherit;">2&nbsp;<span style="background-color: inherit; font-family: 宋体;">域完整性</span></p><p style="background-color: inherit;">实现了对输入到特定列的数值的限制</p><p style="background-color: inherit;">3&nbsp;<span style="background-color: inherit; font-family: 宋体;">引用的完整性</span></p><p style="background-color: inherit;">1&nbsp;<span style="background-color: inherit; font-family: 宋体;">要求子表中的相关项必训在主表中也存在</span></p><p style="background-color: inherit;">2&nbsp;<span style="background-color: inherit; font-family: 宋体;">如果建立了主表和子表&nbsp;则&nbsp;子表中的相关项目的数据，在主表中必须存在</span></p><p style="background-color: inherit;">3<span style="background-color: inherit; font-family: 宋体;">主表中相关的项数据更改了，则子表中的数据也要相应的更改</span></p><p style="background-color: inherit;">4<span style="background-color: inherit; font-family: 宋体;">在删除子表前主表不能删除</span></p><p style="background-color: inherit;">四&nbsp;自定义完整性</p><p style="background-color: inherit;">创建表包括选择字段的名称&nbsp;数据类型&nbsp;定义是否为空&nbsp;设置默认值&nbsp;主键&nbsp;外键关系&nbsp;检查约束等&nbsp;。表中没有合适的列作为主键可以创建标示列。</p><p style="background-color: inherit;">sql&nbsp;<span style="background-color: inherit; font-family: 宋体;">中存在的</span><span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">5</span><span style="background-color: inherit; font-family: 宋体;">中约束</span></p><p style="background-color: inherit;">&nbsp;添加约束的方法：&nbsp;<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">alter&nbsp;table&nbsp;</span><span style="background-color: inherit; font-family: 宋体;">表名&nbsp;</span><span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">add&nbsp;constraint&nbsp;</span><span style="background-color: inherit; font-family: 宋体;">约束名&nbsp;约束类型</span></p><p style="background-color: inherit;">具体的约束说明</p><p style="background-color: inherit;">约束名取名规则&nbsp;：</p><p style="background-color: inherit;">主键&nbsp;<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">pk-stuno</span></p><p style="background-color: inherit;">唯一&nbsp;<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">uq</span></p><p style="background-color: inherit;">默认&nbsp;<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">de</span></p><p style="background-color: inherit;">检查&nbsp;<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">ck</span></p><p style="background-color: inherit;">外键&nbsp;<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">fk</span></p><p style="background-color: inherit;">代码添加约束书写方法<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">(</span><span style="background-color: inherit; font-family: 宋体;">以表格</span><span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">stuinfo)</span></p><p style="background-color: inherit;">添加主键约束：</p><p style="background-color: inherit;">添加唯一键约束：<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">alter&nbsp;table&nbsp;stuinfo&nbsp;add&nbsp;constraint&nbsp;unique</span><span style="background-color: inherit; font-family: 宋体;">（</span><span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">stuid</span><span style="background-color: inherit; font-family: 宋体;">）</span></p><p style="background-color: inherit;">添加默认约束键：&nbsp;<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">alter&nbsp;table&nbsp;stuinfo&nbsp;add&nbsp;constraint&nbsp;df-stuadddress&nbsp;&nbsp;default</span><span style="background-color: inherit; font-family: 宋体;">（‘地址不详’）</span><span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">for&nbsp;stuaddress</span></p><p style="background-color: inherit;">添加检查约束：<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">alter&nbsp;table&nbsp;stuinfo&nbsp;add&nbsp;constraint&nbsp;ck-stuage&nbsp;&nbsp;check(stuage&nbsp;between&nbsp;13&nbsp;and&nbsp;40&nbsp;)</span></p><p style="background-color: inherit;">添加外约束键：&nbsp;<span style="background-color: inherit; font-family: &#39;Times New Roman&#39;;">ALTER&nbsp;TABLE&nbsp;stuMarks&nbsp;ADD&nbsp;CONSTRAINT&nbsp;FK_stuNo&nbsp;&nbsp;FOREIGN&nbsp;KEY(stuNo)&nbsp;REFERENCES&nbsp;stuInfo(stuNo)</span></p><p style="background-color: inherit;">&nbsp;</p><p><br/></p>
                        </code>
                        </pre>
                        <div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_qzone" data-cmd="qzone"></a><a href="#" class="bds_tsina" data-cmd="tsina"></a><a href="#" class="bds_tqq" data-cmd="tqq"></a><a href="#" class="bds_renren" data-cmd="renren"></a><a href="#" class="bds_weixin" data-cmd="weixin"></a></div>
                        <!-- UY BEGIN -->
                        <div id="uyan_frame"></div>
                        <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2113268"></script>
                        <!-- UY END -->
                    </div>
                </div>
                <div id="footerInnerSeparator"></div>
            </div>
        </div>
        <div id="footerOuterSeparator"></div>
    </div>
    <br /><br /><br />
    <script src="../../js/jquery-1.9.1.js"></script>
    <script>
        window._bd_share_config = { "common": { "bdSnsKey": {}, "bdText": $("#divMain pre code").text(), "bdMini": "2", "bdPic": "", "bdStyle": "0", "bdSize": "16" }, "share": {}, "image": { "viewList": ["qzone", "tsina", "tqq", "renren", "weixin"], "viewText": "分享到：", "viewSize": "16" }, "selectShare": { "bdContainerClass": null, "bdSelectMiniList": ["qzone", "tsina", "tqq", "renren", "weixin"] } }; with (document) 0[(getElementsByTagName('head')[0] || body).appendChild(createElement('script')).src = 'http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion=' + ~(-new Date() / 36e5)];
    </script>
</body>
</html>